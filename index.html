# 222T1A0593
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Client-side URL Shortener</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 { text-align: center; color: #333; }
    form { display: flex; gap: 10px; margin-bottom: 20px; }
    input[type="url"] {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      padding: 10px 15px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background: #0056b3; }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    th { background: #f0f0f0; }
    a { color: #007bff; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="container">
    <h1>URL Shortener</h1>
    <form id="urlForm">
      <input type="url" id="longUrl" placeholder="Enter long URL" required>
      <button type="submit">Shorten</button>
    </form>
    <div id="shortUrlContainer"></div>
    <h2>Your URLs</h2>
    <table>
      <thead>
        <tr>
          <th>Short URL</th>
          <th>Original URL</th>
          <th>Clicks</th>
          <th>Created At</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="urlList"></tbody>
    </table>
  </div>

  <script>
    // Utility functions
    function generateShortId(length = 6) {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      let result = '';
      for (let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    function saveUrl(longUrl) {
      const urls = JSON.parse(localStorage.getItem('urls')) || [];
      const shortId = generateShortId();
      urls.push({ shortId, longUrl, clicks: 0, createdAt: new Date().toISOString() });
      localStorage.setItem('urls', JSON.stringify(urls));
      return shortId;
    }

    function getUrl(shortId) {
      const urls = JSON.parse(localStorage.getItem('urls')) || [];
      const urlObj = urls.find(u => u.shortId === shortId);
      if(urlObj) {
        urlObj.clicks += 1;
        localStorage.setItem('urls', JSON.stringify(urls));
        return urlObj.longUrl;
      }
      return null;
    }

    // DOM Elements
    const urlForm = document.getElementById('urlForm');
    const longUrlInput = document.getElementById('longUrl');
    const shortUrlContainer = document.getElementById('shortUrlContainer');
    const urlList = document.getElementById('urlList');

    // Render URL List
    function renderUrls() {
      const urls = JSON.parse(localStorage.getItem('urls')) || [];
      urlList.innerHTML = '';
      urls.forEach(u => {
        const tr = document.createElement('tr');

        const shortTd = document.createElement('td');
        const shortLink = document.createElement('a');
        shortLink.href = "#";
        shortLink.textContent = `${window.location.origin}/#${u.shortId}`;
        shortLink.addEventListener('click', () => {
          window.location.hash = u.shortId;
        });
        shortTd.appendChild(shortLink);

        const longTd = document.createElement('td');
        longTd.textContent = u.longUrl;

        const clicksTd = document.createElement('td');
        clicksTd.textContent = u.clicks;

        const createdTd = document.createElement('td');
        createdTd.textContent = new Date(u.createdAt).toLocaleString();

        const actionTd = document.createElement('td');
        const copyBtn = document.createElement('button');
        copyBtn.textContent = 'Copy';
        copyBtn.addEventListener('click', () => {
          navigator.clipboard.writeText(`${window.location.origin}/#${u.shortId}`);
          alert('Short URL copied!');
        });
        actionTd.appendChild(copyBtn);

        tr.appendChild(shortTd);
        tr.appendChild(longTd);
        tr.appendChild(clicksTd);
        tr.appendChild(createdTd);
        tr.appendChild(actionTd);

        urlList.appendChild(tr);
      });
    }

    // Handle form submit
    urlForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const longUrl = longUrlInput.value;
      const shortId = saveUrl(longUrl);
      shortUrlContainer.innerHTML = `Short URL: <a href="#${shortId}" id="shortLink">${window.location.origin}/#${shortId}</a>`;
      longUrlInput.value = '';
      renderUrls();
    });

    // Handle redirects using hash
    window.addEventListener('hashchange', () => {
      const shortId = window.location.hash.substring(1);
      const longUrl = getUrl(shortId);
      if(longUrl) window.open(longUrl, '_blank');
      renderUrls();
    });

    // Initial render
    renderUrls();
  </script>
</body>
</html>
